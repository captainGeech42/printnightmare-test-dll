#include "pch.h"
#include "Pls.h"

void Pls::PoC() {
	SYSTEMTIME systemTime;
	DWORD pid, tid;
	char logFilepath[1024];
	FILE* fp;

	pid = GetCurrentProcessId();
	tid = GetCurrentThreadId();

	snprintf(logFilepath, 1024, "C:\\log_p%d_t%d.log", pid, tid);

	if (fopen_s(&fp, logFilepath, "a") != 0) return;
	if (!fp) return;

	GetSystemTime(&systemTime);

	fprintf_s(fp, "%d/%02d/%02d %02d:%02d:%02d hello world from printnightmare garbage\n", systemTime.wYear,
		systemTime.wMonth,
		systemTime.wDay,
		systemTime.wHour,
		systemTime.wMinute,
		systemTime.wSecond);

	fclose(fp);
}